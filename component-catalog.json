{
  "catalogVersion": "1.0.0",
  "designSystem": { "name": "bootstrap", "bootstrapVersion": "5.3" },
  "tokens": {
    "spacing": ["none", "xs", "sm", "md", "lg", "xl"],
    "width": ["auto", "full"],
    "align": ["start", "center", "end", "stretch"],
    "size": ["sm", "md", "lg"],
    "variant": ["primary", "secondary", "success", "warning", "danger", "info", "light", "dark", "link"]
  },

  "commonPropSets": {
    "baseNode": {
      "description": "Standard non-styling props for all nodes.",
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "visible": { "type": "boolean", "default": true },
          "disabled": { "type": "boolean", "default": false },
          "readOnly": { "type": "boolean", "default": false }
        }
      }
    },
    "layoutHints": {
      "description": "Bootstrap-safe layout hints; no raw className/style.",
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "spacing": { "type": "string", "enum": ["none", "xs", "sm", "md", "lg", "xl"], "default": "md" },
          "width": { "type": "string", "enum": ["auto", "full"], "default": "full" },
          "align": { "type": "string", "enum": ["start", "center", "end", "stretch"], "default": "stretch" }
        }
      }
    },
    "inputBase": {
      "description": "Shared props across all input components.",
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "placeholder": { "type": "string" },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "autocomplete": { "type": "string" }
        }
      }
    }
  },

  "components": [
    {
      "type": "FormContainer",
      "category": "layout",
      "version": "1.0.0",
      "description": "Top-level form wrapper with submit lifecycle and error summary.",
      "acceptsChildren": true,
      "childPolicy": { "allowedChildTypes": ["Grid", "Section", "Alert", "Divider"], "minChildren": 1 },
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["formName"],
        "properties": {
          "formName": { "type": "string", "minLength": 1 },
          "mode": { "type": "string", "enum": ["create", "edit"], "default": "create" },
          "state": { "type": "string", "enum": ["idle", "loading", "success", "error"], "default": "idle" },
          "showErrorSummary": { "type": "boolean", "default": true }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": true },
        "defaults": { "showErrorSummary": true, "state": "idle" },
        "constraints": []
      }
    },

    {
      "type": "Grid",
      "category": "structure",
      "version": "1.0.0",
      "description": "Responsive Bootstrap grid container.",
      "acceptsChildren": true,
      "childPolicy": { "allowedChildTypes": ["GridRow", "Section", "Divider"], "minChildren": 1 },
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "gutter": { "type": "string", "enum": ["none", "sm", "md", "lg"], "default": "md" }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "gutter": "md" },
        "constraints": []
      }
    },

    {
      "type": "GridRow",
      "category": "structure",
      "version": "1.0.0",
      "description": "Row wrapper for columns.",
      "acceptsChildren": true,
      "childPolicy": { "allowedChildTypes": ["GridCol"], "minChildren": 1 },
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": { "type": "object", "additionalProperties": false, "properties": {} },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": {},
        "constraints": []
      }
    },

    {
      "type": "GridCol",
      "category": "structure",
      "version": "1.0.0",
      "description": "Bootstrap column with breakpoint spans.",
      "acceptsChildren": true,
      "childPolicy": {
        "allowedChildTypes": [
          "Section",
          "TextInput",
          "TextArea",
          "NumberInput",
          "DateInput",
          "Select",
          "Checkbox",
          "ChoiceGroup",
          "Button",
          "Alert",
          "Divider"
        ],
        "minChildren": 1
      },
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "xs": { "type": "integer", "minimum": 1, "maximum": 12, "default": 12 },
          "sm": { "type": "integer", "minimum": 1, "maximum": 12 },
          "md": { "type": "integer", "minimum": 1, "maximum": 12 },
          "lg": { "type": "integer", "minimum": 1, "maximum": 12 }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "xs": 12 },
        "constraints": []
      }
    },

    {
      "type": "Section",
      "category": "structure",
      "version": "1.0.0",
      "description": "Section header with title/description; can contain inputs.",
      "acceptsChildren": true,
      "childPolicy": {
        "allowedChildTypes": [
          "Grid",
          "GridRow",
          "GridCol",
          "TextInput",
          "TextArea",
          "NumberInput",
          "DateInput",
          "Select",
          "Checkbox",
          "ChoiceGroup",
          "Divider"
        ],
        "minChildren": 0
      },
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["title"],
        "properties": {
          "title": { "type": "string", "minLength": 1 },
          "description": { "type": "string" },
          "spacing": { "type": "string", "enum": ["none", "xs", "sm", "md", "lg", "xl"], "default": "md" }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "spacing": "md" },
        "constraints": []
      }
    },

    {
      "type": "Divider",
      "category": "structure",
      "version": "1.0.0",
      "description": "Visual separator with safe spacing tokens.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "spacing": { "type": "string", "enum": ["none", "xs", "sm", "md", "lg", "xl"], "default": "md" }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "spacing": "md" },
        "constraints": []
      }
    },

    {
      "type": "TextInput",
      "category": "input",
      "version": "1.0.0",
      "description": "Single-line input supporting different input types via a constrained enum.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "string" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "placeholder": { "type": "string" },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "autocomplete": { "type": "string" },

          "inputType": { "type": "string", "enum": ["text", "email", "tel", "url", "password"], "default": "text" },
          "minLength": { "type": "integer", "minimum": 0 },
          "maxLength": { "type": "integer", "minimum": 1 },
          "pattern": { "type": "string" }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "inputType": "text", "size": "md" },
        "constraints": [
          {
            "id": "textinput-no-password-autocomplete-off",
            "severity": "warn",
            "when": { "propEquals": { "prop": "inputType", "value": "password" } },
            "message": "Password fields should specify autocomplete. Default to 'current-password' if unknown.",
            "suggestedFix": { "setProps": { "autocomplete": "current-password" } }
          }
        ]
      }
    },

    {
      "type": "TextArea",
      "category": "input",
      "version": "1.0.0",
      "description": "Multi-line text input.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "string" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "placeholder": { "type": "string" },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "rows": { "type": "integer", "minimum": 2, "maximum": 20, "default": 4 },
          "maxLength": { "type": "integer", "minimum": 1 }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "rows": 4, "size": "md" },
        "constraints": []
      }
    },

    {
      "type": "NumberInput",
      "category": "input",
      "version": "1.0.0",
      "description": "Numeric input with range constraints.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "number" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "min": { "type": "number" },
          "max": { "type": "number" },
          "step": { "type": "number", "exclusiveMinimum": 0, "default": 1 }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "step": 1, "size": "md" },
        "constraints": [
          {
            "id": "number-min-le-max",
            "severity": "error",
            "when": { "propExists": "min" },
            "message": "If both min and max are set, min must be <= max."
          }
        ]
      }
    },

    {
      "type": "DateInput",
      "category": "input",
      "version": "1.0.0",
      "description": "Date input (YYYY-MM-DD).",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "date" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "minDate": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" },
          "maxDate": { "type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$" }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "size": "md" },
        "constraints": []
      }
    },

    {
      "type": "Select",
      "category": "input",
      "version": "1.0.0",
      "description": "Single select dropdown.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "string" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label", "options"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "required": { "type": "boolean", "default": false },
          "helpText": { "type": "string" },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "options": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["value", "label"],
              "properties": {
                "value": { "type": "string", "minLength": 1 },
                "label": { "type": "string", "minLength": 1 }
              }
            }
          }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "size": "md" },
        "constraints": []
      }
    },

    {
      "type": "Checkbox",
      "category": "input",
      "version": "1.0.0",
      "description": "Single boolean checkbox.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "boolean" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "helpText": { "type": "string" },
          "required": { "type": "boolean", "default": false }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "required": false },
        "constraints": []
      }
    },

    {
      "type": "ChoiceGroup",
      "category": "input",
      "version": "1.0.0",
      "description": "Single or multi-choice group rendered as radios or checkboxes.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": true, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["id", "name", "label", "mode", "options"],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z][a-z0-9-]*$" },
          "name": { "type": "string", "pattern": "^[a-z][a-z0-9_.-]*$" },
          "label": { "type": "string", "minLength": 1 },
          "helpText": { "type": "string" },
          "required": { "type": "boolean", "default": false },

          "mode": { "type": "string", "enum": ["single", "multi"] },
          "presentation": { "type": "string", "enum": ["radio", "checkbox", "inline"], "default": "radio" },
          "options": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["value", "label"],
              "properties": {
                "value": { "type": "string", "minLength": 1 },
                "label": { "type": "string", "minLength": 1 }
              }
            }
          }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": true, "supportsHelpText": true, "supportsErrorText": true },
        "defaults": { "presentation": "radio" },
        "constraints": [
          {
            "id": "choicegroup-single-not-checkbox",
            "severity": "warn",
            "when": { "propEquals": { "prop": "mode", "value": "single" } },
            "message": "For single choice, prefer radio presentation unless explicitly requested otherwise.",
            "suggestedFix": { "setProps": { "presentation": "radio" } }
          }
        ]
      }
    },

    {
      "type": "Button",
      "category": "action",
      "version": "1.0.0",
      "description": "Action button with loading state.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["text", "action"],
        "properties": {
          "text": { "type": "string", "minLength": 1 },
          "action": { "type": "string", "enum": ["submit", "reset", "secondary"] },
          "variant": {
            "type": "string",
            "enum": ["primary", "secondary", "success", "warning", "danger", "info", "light", "dark", "link"],
            "default": "primary"
          },
          "size": { "type": "string", "enum": ["sm", "md", "lg"], "default": "md" },
          "loading": { "type": "boolean", "default": false },
          "disabled": { "type": "boolean", "default": false }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "variant": "primary", "size": "md", "loading": false },
        "constraints": []
      }
    },

    {
      "type": "Alert",
      "category": "feedback",
      "version": "1.0.0",
      "description": "Form-level feedback message.",
      "acceptsChildren": false,
      "dataBinding": { "bindable": false, "valueType": "unknown" },
      "propsSchema": {
        "type": "object",
        "additionalProperties": false,
        "required": ["variant", "text"],
        "properties": {
          "variant": {
            "type": "string",
            "enum": ["success", "warning", "danger", "info"],
            "default": "info"
          },
          "text": { "type": "string", "minLength": 1 },
          "dismissible": { "type": "boolean", "default": false }
        }
      },
      "rules": {
        "a11y": { "requiresLabel": false, "supportsHelpText": false, "supportsErrorText": false },
        "defaults": { "variant": "info", "dismissible": false },
        "constraints": []
      }
    }
  ]
}
